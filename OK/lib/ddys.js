**dmFyIGxpc3RzID0gYGpzOgpsb2coVEFCUyk7CmxldCBkID0gW107CnBkZmggPSBqc3AucGRmaDsKcGRmYSA9IGpzcC5wZGZhOwppZiAodHlwZW9mIHBsYXlfdXJsID09PSAidW5kZWZpbmVkIikgewoJdmFyIHBsYXlfdXJsID0gIiIKfQoKZnVuY3Rpb24gZ2V0TGlzdHMoaHRtbCkgewoJbGV0IHNyYyA9IHBkZmgoaHRtbCwgIi53cC1wbGF5bGlzdC1zY3JpcHQmJkh0bWwiKTsKCXNyYyA9IEpTT04ucGFyc2Uoc3JjKS50cmFja3M7CglsZXQgbGlzdDEgPSBbXTsKCWxldCBsaXN0MiA9IFtdOwoJbGV0IHVybDEgPSAiIjsKCWxldCB1cmwyID0gIiI7CglzcmMuZm9yRWFjaChmdW5jdGlvbihpdCkgewoJCWxldCBzcmMwID0gaXQuc3JjMDsKCQlsZXQgc3JjMSA9IGl0LnNyYzE7CgkJbGV0IHRpdGxlID0gaXQuY2FwdGlvbjsKCQl1cmwxID0gImh0dHBzOi8vdi5kZHlzLnBybyIgKyBzcmMwOwoJCXVybDIgPSAiaHR0cHM6Ly9kZHlzLnByby9nZXR2ZGRyMi92aWRlbz9pZD0iICsgc3JjMSArICImdHlwZT1taXgiOwoJCWxldCB6bSA9ICJodHRwczovL2RkeXMucHJvL3N1YmRkci8iICsgaXQuc3Vic3JjOwoJCWxpc3QxLnB1c2goewoJCQl0aXRsZTogdGl0bGUsCgkJCXVybDogdXJsMSwKCQkJZGVzYzogem0KCQl9KTsKCQlsaXN0Mi5wdXNoKHsKCQkJdGl0bGU6IHRpdGxlLAoJCQl1cmw6IHVybDIsCgkJCWRlc2M6IHptCgkJfSkKCX0pOwoJcmV0dXJuIHsKCQlsaXN0MTogbGlzdDEsCgkJbGlzdDI6IGxpc3QyCgl9Cn0KdmFyIGRhdGEgPSBnZXRMaXN0cyhodG1sKTsKdmFyIGxpc3QxID0gZGF0YS5saXN0MTsKdmFyIGxpc3QyID0gZGF0YS5saXN0MjsKbGV0IG51bXMgPSBwZGZhKGh0bWwsICJib2R5JiYucG9zdC1wYWdlLW51bWJlcnMiKTsKbnVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0KSB7CglsZXQgbnVtID0gcGRmaChpdCwgImJvZHkmJlRleHQiKTsKCWxvZyhudW0pOwoJbGV0IG51cmwgPSBpbnB1dCArIG51bSArICIvIjsKCWlmIChudW0gPT0gMSkgewoJCXJldHVybgoJfQoJbG9nKG51cmwpOwoJbGV0IGh0bWwgPSByZXF1ZXN0KG51cmwpOwoJbGV0IGRhdGEgPSBnZXRMaXN0cyhodG1sKTsKCWxpc3QxID0gbGlzdDEuY29uY2F0KGRhdGEubGlzdDEpOwoJbGlzdDIgPSBsaXN0Mi5jb25jYXQoZGF0YS5saXN0MikKfSk7Cmxpc3QxID0gbGlzdDEubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKCXJldHVybiBpdGVtLnRpdGxlICsgIiQiICsgcGxheV91cmwgKyB1cmxlbmNvZGUoaXRlbS51cmwgKyAifCIgKyBpbnB1dCArICJ8IiArIGl0ZW0uZGVzYykKfSk7Cmxpc3QyID0gbGlzdDIubWFwKGZ1bmN0aW9uKGl0ZW0pIHsKCXJldHVybiBpdGVtLnRpdGxlICsgIiQiICsgcGxheV91cmwgKyB1cmxlbmNvZGUoaXRlbS51cmwgKyAifCIgKyBpbnB1dCArICJ8IiArIGl0ZW0uZGVzYykKfSk7CkxJU1RTID0gW2xpc3QxLCBsaXN0Ml07CmA7Cgp2YXIgbGF6eSA9IGBqczoKbGV0IHB1cmwgPSBpbnB1dC5zcGxpdCgifCIpWzBdOwpsZXQgcmVmZXJlciA9IGlucHV0LnNwbGl0KCJ8IilbMV07CmxldCB6bSA9IGlucHV0LnNwbGl0KCJ8IilbMl07CnByaW50KCJwdXJsOiIgKyBwdXJsKTsKcHJpbnQoInJlZmVyZXI6IiArIHJlZmVyZXIpOwpwcmludCgiem06IiArIHptKTsKaWYgKC9nZXR2ZGRyLy50ZXN0KHB1cmwpKSB7CiAgICBsZXQgaHRtbCA9IHJlcXVlc3QocHVybCwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgUmVmZXJlcjogSE9TVCwKICAgICAgICAgICAgIlVzZXItQWdlbnQiOiBNT0JJTEVfVUEKICAgICAgICB9CiAgICB9KTsKICAgIHByaW50KGh0bWwpOwogICAgdHJ5IHsKICAgICAgICBpbnB1dCA9IHtqeDowLHVybDpKU09OLnBhcnNlKGh0bWwpLnVybCxwYXJzZTowfSB8fCB7fQogICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlucHV0ID0gcHVybAogICAgfQp9IGVsc2UgewogICAgaW5wdXQgPSB7CiAgICAgICAgang6IDAsCiAgICAgICAgdXJsOiBwdXJsLAogICAgICAgIHBhcnNlOiAwLAogICAgICAgIGhlYWRlcjogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAndXNlci1hZ2VudCc6IE1PQklMRV9VQSwKICAgICAgICAgICAgJ3JlZmVyZXInOiBIT1NUCiAgICAgICAgfSkKICAgIH0KfQpgOwoKLy8g572R5Z2A5Y+R5biD6aG1IGh0dHBzOi8vZGR5cy5zaXRlCi8vIOe9keWdgOWPkeW4g+mhtSBodHRwczovL2RkeXMud2lraQp2YXIgcnVsZT17CiAgICB0aXRsZTonZGR5cycsCiAgICAvLyBob3N0OidodHRwczovL2RkeXMud2lraScsIAogICAgLy8gaG9zdEpzOidwcmludChIT1NUKTtsZXQgaHRtbD1yZXF1ZXN0KEhPU1Qse2hlYWRlcnM6eyJVc2VyLUFnZW50IjpNT0JJTEVfVUF9fSk7SE9TVCA9IGpzcC5wZGZoKGh0bWwsImE6ZXEoMSkmJmhyZWYiKScsCiAgICBob3N0OidodHRwczovL2RkeXMucHJvJywKICAgIC8vIGhvc3Q6J2h0dHBzOi8vZGR5cy5tb3YnLAogICAgdXJsOicvZnljbGFzcy9wYWdlL2Z5cGFnZS8nLAogICAgc2VhcmNoVXJsOicvP3M9KiomcG9zdF90eXBlPXBvc3QnLAogICAgc2VhcmNoYWJsZToyLAogICAgcXVpY2tTZWFyY2g6MCwKICAgIGZpbHRlcmFibGU6MCwKICAgIGhlYWRlcnM6ewogICAgICAgICdVc2VyLUFnZW50JzonTU9CSUxFX1VBJywKICAgIH0sCiAgICBjbGFzc19wYXJzZTonI3ByaW1hcnktbWVudSBsaS5tZW51LWl0ZW07YSYmVGV4dDthJiZocmVmO1wucHJvLyguKiknLAogICAgY2F0ZV9leGNsdWRlOifnq5nplb98XuWFtuS7liR85YWz5LqOfF7nlLXlvbEkfF7liafpm4YkfF7nsbvlnoskJywKICAgIHBsYXlfcGFyc2U6dHJ1ZSwKICAgIC8vIGxhenk6J2pzOmxldCBwdXJsPWlucHV0LnNwbGl0KCJ8IilbMF07bGV0IHJlZmVyZXI9aW5wdXQuc3BsaXQoInwiKVsxXTtsZXQgem09aW5wdXQuc3BsaXQoInwiKVsyXTtwcmludCgicHVybDoiK3B1cmwpO3ByaW50KCJyZWZlcmVyOiIrcmVmZXJlcik7cHJpbnQoInptOiIrem0pO2xldCBteXVhPSJva2h0dHAvMy4xNSI7aWYoL2RkcmtleS8udGVzdChwdXJsKSl7bGV0IHJldD1yZXF1ZXN0KHB1cmwse1JlZmVyZXI6cmVmZXJlcix3aXRoSGVhZGVyczp0cnVlLCJVc2VyLUFnZW50IjpteXVhfSk7bG9nKHJldCk7aW5wdXQ9cHVybH1lbHNle2xldCBodG1sPXJlcXVlc3QocHVybCx7aGVhZGVyczp7UmVmZXJlcjpyZWZlcmVyLCJVc2VyLUFnZW50IjpteXVhfX0pO3ByaW50KGh0bWwpO3RyeXtpbnB1dD1KU09OLnBhcnNlKGh0bWwpLnVybHx8e319Y2F0Y2goZSl7aW5wdXQ9cHVybH19JywKICAgIGxhenk6bGF6eSwKICAgIGxpbWl0OjYsCiAgICDmjqjojZA6JyonLAogICAgZG91YmxlOnRydWUsIC8vIOaOqOiNkOWGheWuueaYr+WQpuWPjOWxguWumuS9jQogICAg5LiA57qnOicucG9zdC1ib3gtbGlzdCYmYXJ0aWNsZTthOmVxKC0xKSYmVGV4dDsucG9zdC1ib3gtaW1hZ2UmJnN0eWxlO2E6ZXEoMCkmJlRleHQ7YTplcSgtMSkmJmhyZWYnLAogICAg5LqM57qnOnsKICAgICAgICAidGl0bGUiOiIucG9zdC10aXRsZSYmVGV4dDsuY2F0LWxpbmtzJiZUZXh0IiwKICAgICAgICAiaW1nIjoiLmRvdWxpc3QtaXRlbSYmaW1nJiZkYXRhLWNmc3JjIiwKICAgICAgICAiZGVzYyI6Ii5wdWJsaXNoZWQmJlRleHQiLAogICAgICAgICJjb250ZW50IjoiLmFic3RyYWN0JiZUZXh0IiwKICAgICAgICAvLyAidGFicyI6ImpzOlRBQlM9Wyflm73lhoUnLCfmtbflpJYo6LKM5Ly85LiN6IO95pKt5pS+KSddIiwKICAgICAgICAidGFicyI6ImpzOlRBQlM9Wyflm73lhoUo5pS5RXhv5pKt5pS+5ZmoKScsJ+WbveWGhTInXSIsCiAgICAgICAgLy8gImxpc3RzIjoianM6bG9nKFRBQlMpO2xldCBkPVtdO3BkZmg9anNwLnBkZmg7cGRmYT1qc3AucGRmYTtpZih0eXBlb2YgcGxheV91cmw9PT1cInVuZGVmaW5lZFwiKXt2YXIgcGxheV91cmw9XCJcIn1mdW5jdGlvbiBnZXRMaXN0cyhodG1sKXtsZXQgc3JjPXBkZmgoaHRtbCxcIi53cC1wbGF5bGlzdC1zY3JpcHQmJkh0bWxcIik7c3JjPUpTT04ucGFyc2Uoc3JjKS50cmFja3M7bGV0IGxpc3QxPVtdO2xldCBsaXN0Mj1bXTtzcmMuZm9yRWFjaChmdW5jdGlvbihpdCl7bGV0IHNyYzA9aXQuc3JjMDtsZXQgc3JjMT1pdC5zcmMxO2xldCBzcmMyPWl0LnNyYzI7bGV0IHRpdGxlPWl0LmNhcHRpb247bGV0IHVybDE9XCJodHRwczovL2RkeXMudHYvZ2V0dmRkci92aWRlbz9pZD1cIitzcmMxK1wiJmRpbT0xMDgwUCsmdHlwZT1taXhcIjtsZXQgdXJsMj1cImh0dHBzOi8vdy5kZHlzLnR2XCIrc3JjMCtcIj9kZHJrZXk9XCIrc3JjMjtsZXQgem09XCJodHRwczovL2RkeXMudHYvc3ViZGRyL1wiK2l0LnN1YnNyYztsaXN0MS5wdXNoKHt0aXRsZTp0aXRsZSx1cmw6dXJsMSxkZXNjOnptfSk7bGlzdDIucHVzaCh7dGl0bGU6dGl0bGUsdXJsOnVybDIsZGVzYzp6bX0pfSk7cmV0dXJue2xpc3QxOmxpc3QxLGxpc3QyOmxpc3QyfX12YXIgZGF0YT1nZXRMaXN0cyhodG1sKTt2YXIgbGlzdDE9ZGF0YS5saXN0MTt2YXIgbGlzdDI9ZGF0YS5saXN0MjtsZXQgbnVtcz1wZGZhKGh0bWwsXCJib2R5JiYucG9zdC1wYWdlLW51bWJlcnNcIik7bnVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0KXtsZXQgbnVtPXBkZmgoaXQsXCJib2R5JiZUZXh0XCIpO2xvZyhudW0pO2xldCBudXJsPWlucHV0K251bStcIi9cIjtpZihudW09PTEpe3JldHVybn1sb2cobnVybCk7bGV0IGh0bWw9cmVxdWVzdChudXJsKTtsZXQgZGF0YT1nZXRMaXN0cyhodG1sKTtsaXN0MT1saXN0MS5jb25jYXQoZGF0YS5saXN0MSk7bGlzdDI9bGlzdDIuY29uY2F0KGRhdGEubGlzdDIpfSk7bGlzdDE9bGlzdDEubWFwKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtLnRpdGxlK1wiJFwiK3BsYXlfdXJsK3VybGVuY29kZShpdGVtLnVybCtcInxcIitpbnB1dCtcInxcIitpdGVtLmRlc2MpfSk7bGlzdDI9bGlzdDIubWFwKGZ1bmN0aW9uKGl0ZW0pe3JldHVybiBpdGVtLnRpdGxlK1wiJFwiK3BsYXlfdXJsK3VybGVuY29kZShpdGVtLnVybCtcInxcIitpbnB1dCtcInxcIitpdGVtLmRlc2MpfSk7TElTVFM9W2xpc3QxLGxpc3QyXTsiLAogICAgICAgIC8vIGxpc3RzOidqczpsb2coVEFCUyk7bGV0IGQ9W107cGRmaD1qc3AucGRmaDtwZGZhPWpzcC5wZGZhO2lmKHR5cGVvZiBwbGF5X3VybD09PSJ1bmRlZmluZWQiKXt2YXIgcGxheV91cmw9IiJ9ZnVuY3Rpb24gZ2V0TGlzdHMoaHRtbCl7bGV0IHNyYz1wZGZoKGh0bWwsIi53cC1wbGF5bGlzdC1zY3JpcHQmJkh0bWwiKTtzcmM9SlNPTi5wYXJzZShzcmMpLnRyYWNrcztsZXQgbGlzdDE9W107bGV0IGxpc3QyPVtdO3NyYy5mb3JFYWNoKGZ1bmN0aW9uKGl0KXtsZXQgc3JjMD1pdC5zcmMwO2xldCBzcmMxPWl0LnNyYzE7bGV0IHNyYzI9aXQuc3JjMjtsZXQgdGl0bGU9aXQuY2FwdGlvbjtsZXQgdXJsMT0iaHR0cHM6Ly9kZHlzLnByby9nZXR2ZGRyL3ZpZGVvP2lkPSIrc3JjMSsiJmRpbT0xMDgwUCsmdHlwZT1taXgiO2xldCB1cmwyPSJodHRwczovL3cuZGR5cy5wcm8iK3NyYzArIj9kZHJrZXk9IitzcmMyO2xldCB6bT0iaHR0cHM6Ly9kZHlzLnByby9zdWJkZHIvIitpdC5zdWJzcmM7bGlzdDEucHVzaCh7dGl0bGU6dGl0bGUsdXJsOnVybDEsZGVzYzp6bX0pO2xpc3QyLnB1c2goe3RpdGxlOnRpdGxlLHVybDp1cmwyLGRlc2M6em19KX0pO3JldHVybntsaXN0MTpsaXN0MSxsaXN0MjpsaXN0Mn19dmFyIGRhdGE9Z2V0TGlzdHMoaHRtbCk7dmFyIGxpc3QxPWRhdGEubGlzdDE7dmFyIGxpc3QyPWRhdGEubGlzdDI7bGV0IG51bXM9cGRmYShodG1sLCJib2R5JiYucG9zdC1wYWdlLW51bWJlcnMiKTtudW1zLmZvckVhY2goZnVuY3Rpb24oaXQpe2xldCBudW09cGRmaChpdCwiYm9keSYmVGV4dCIpO2xvZyhudW0pO2xldCBudXJsPWlucHV0K251bSsiLyI7aWYobnVtPT0xKXtyZXR1cm59bG9nKG51cmwpO2xldCBodG1sPXJlcXVlc3QobnVybCk7bGV0IGRhdGE9Z2V0TGlzdHMoaHRtbCk7bGlzdDE9bGlzdDEuY29uY2F0KGRhdGEubGlzdDEpO2xpc3QyPWxpc3QyLmNvbmNhdChkYXRhLmxpc3QyKX0pO2xpc3QxPWxpc3QxLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS50aXRsZSsiJCIrcGxheV91cmwrdXJsZW5jb2RlKGl0ZW0udXJsKyJ8IitpbnB1dCsifCIraXRlbS5kZXNjKX0pO2xpc3QyPWxpc3QyLm1hcChmdW5jdGlvbihpdGVtKXtyZXR1cm4gaXRlbS50aXRsZSsiJCIrcGxheV91cmwrdXJsZW5jb2RlKGl0ZW0udXJsKyJ8IitpbnB1dCsifCIraXRlbS5kZXNjKX0pO0xJU1RTPVtsaXN0MSxsaXN0Ml07JywKICAgICAgICAibGlzdHMiOmxpc3RzCiAgICB9LAogICAg5pCc57SiOicjbWFpbiYmYXJ0aWNsZTsucG9zdC10aXRsZSYmVGV4dDs7LnB1Ymxpc2hlZCYmVGV4dDthJiZocmVmJwp9